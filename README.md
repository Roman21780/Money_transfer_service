
# **Money Transfer Service**

Приложение предоставляет простой интерфейс для перевода денег с карты на карту.

**Демо:** [https://serp-ya.github.io/card-transfer/](https://serp-ya.github.io/card-transfer/)

---

## **Описание проекта**

Проект предоставляет UI для перевода денег с одной карты на другую. В видимой части приложения присутствуют две карты (откуда и куда переводить), поле ввода суммы перевода и кнопка "Отправить".

### **Основные возможности**
- Пользователь может ввести данные карты отправителя и получателя.
- Поддерживается форматирование ввода данных.
- Реализована валидация полей формы.
- При успешной отправке или возникновении ошибки отображаются соответствующие модальные окна.

---

## **Системные требования**

- Node.js (версия 14 или выше)
- npm (версия 6 или выше)

---

## **Установка и запуск**
## **Backend**

1. **Сборка проекта**
./gradlew build

2. **Создание Docker-образа**
docker build -t money-transfer .

3. **Запуск через Docker Compose**
docker-compose up

## **Frontend**
1. **Клонирование репозитория:**
   ```bash
   git clone https://github.com/serp-ya/card-transfer.git
   cd card-transfer
   ```

2. **Установка зависимостей:**
   ```bash
   npm install
   ```

3. **Настройка переменных окружения:**
   - Откройте файл `.env` в корневой директории проекта.
   - Измените значение переменной `REACT_APP_API_URL` на URL вашего API.  
     **Примечание:** Описывать эндпоинты в файле `.env` **не нужно**.

4. **Запуск приложения:**
   ```bash
   npm run start
   ```
   После запуска проект будет доступен по адресу: [http://localhost:3000/](http://localhost:3000/).

---

## **Форматирование и валидация полей**

### **Форматирование ввода**
- **Номер карты:**  
  `0000000000000000` => `0000 0000 0000 0000`
- **ММ/ГГ:**  
  `1234` => `12/34`
- **Сумма перевода:**  
  `12345678` => `₽ 12 345 678`

### **Валидация полей**
- **Номер карты:** Обязательное поле, минимум 16 знаков.
- **ММ/ГГ:** Обязательное поле, минимум 4 знака. Дата не может быть ниже текущей, месяц должен быть в диапазоне от 1 до 12.
- **CVC:** Обязательное поле, минимум 3 знака.
- **Сумма перевода:** Обязательное поле, не может быть равной или меньше 0.

**Примечание:** Проверка ошибок срабатывает при нажатии кнопки "Отправить".

---

## **API Эндпоинты**

Приложение формирует запросы к API на основе значения переменной `REACT_APP_API_URL` и "хвостов" эндпоинтов.

### **Эндпоинты**
1. **Перевод денег:**
   ```
   POST /transfer
   ```
   Принимает объект с данными формы.

2. **Подтверждение операции:**
   ```
   POST /confirmOperation
   ```
   Принимает объект с ID операции и секретным кодом.

---

## **Обработка ошибок**

- При возникновении ошибки на стороне сервера отображается модальное окно с текстом ошибки, который сервер прислал в поле `message` ответа.
- При успешной отправке отображается соответствующее модальное окно, и поля формы очищаются.

---

## **Дополнительная информация**

### **Форматирование запросов**
Запросы формируются автоматически приложением на основе введенных пользователем данных.

### **Примеры запросов**

#### **Перевод денег**
```bash
curl -X POST http://localhost:5500/transfer \
-H "Content-Type: application/json" \
-d '{
  "cardFromNumber": "1234567890123456",
  "cardFromValidTill": "12/25",
  "cardFromCVV": "123",
  "cardToNumber": "1111222233334444",
  "amount": {
    "value": 10000,
    "currency": "RUB"
  }
}'
```

#### **Подтверждение операции**
```bash
curl -X POST http://localhost:5500/confirmOperation \
-H "Content-Type: application/json" \
-d '{
  "operationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "code": "0000"
}'
```

## Анализ
**Как получить логи из контейнера:**

**bash docker cp <container_id>:/app/logs/application.log ./local/path/**

**Запуск проекта: Соберите проект:**
bash ./gradlew clean build Запустите через Docker:

bash docker-compose down && docker-compose up --build

**Проверка работы: Бэкенд будет доступен на http://localhost:5500**
**Фронтенд на http://localhost:3000**

**Логи будут сохраняться в папке logs/ в вашем проекте**

**Альтернативный вариант (без Docker):**
**В одном терминале (бэкенд):**

bash ./gradlew bootRun

**В другом терминале (фронтенд):**

bash cd C:\Java\Project1\WEB\card-transfer npm start

**Проверка работы Фронтенд будет доступен по: http://localhost:3000**
**Бэкенд будет доступен по: http://localhost:5500**

**Для проверки API:**

bash curl -X POST http://localhost:5500/transfer -H "Content-Type: application/json" -d '{"cardFromNumber":"1234567890123456","cardToNumber":"1111222233334444", "amount":{"value":1000}}'

**Логирование Логи будут доступны:**
**Бэкенд: в папке ./logs вашего проекта**

**Фронтенд: в терминале или через docker logs money_transfer_service-frontend-1**

---
